# YouTube API å½±ç‰‡è³‡æ–™èª¿é–± - æ§ç®¡æ–‡ä»¶

## ğŸ¯ æ ¸å¿ƒä»»å‹™

### âœ… å·²å®Œæˆ
- [x] å¯¦ç¾é›™æ­¥é©Ÿ API æŸ¥è©¢æ©Ÿåˆ¶ (Search.list + Videos.list)
- [x] åŠ å…¥ hashtags æ¬„ä½åˆ° Google Sheet è¿½è¹¤ç³»çµ±
- [x] ä¿®æ”¹ç©º query é‚è¼¯ï¼Œä½¿ç”¨åœ°å€é…ç½®ä½œç‚ºæ•‘å ´æ©Ÿåˆ¶
- [x] å‰µå»º hashtag æå–å‡½æ•¸æ”¯æ´ä¸­è‹±æ–‡

### ğŸ”„ é€²è¡Œä¸­
- [ ] æ–‡ä»¶åŒ– API èª¿ç”¨æµç¨‹å’Œæœ€ä½³å¯¦å‹™

### ğŸ“‹ å¾…è¾¦äº‹é …
- [ ] åŠ å…¥è¶¨å‹¢åˆ†æåƒæ•¸ (likeCount, commentCount, duration, categoryId)
- [ ] æ›´æ–° API èª¿ç”¨å¾ 'snippet,statistics' åˆ° 'snippet,statistics,contentDetails'
- [ ] ç›£æ§ API é…é¡ä½¿ç”¨æƒ…æ³
- [ ] å»ºç«‹ API éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- [ ] è€ƒæ…®å¯¦ç¾å¿«å–æ©Ÿåˆ¶æ¸›å°‘é‡è¤‡èª¿ç”¨

---

## ğŸ“Š YouTube API èª¿ç”¨æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šSearch.list (æœå°‹å½±ç‰‡)
**ç›®çš„ï¼š** æ ¹æ“šé—œéµå­—æœå°‹ç¬¦åˆæ¢ä»¶çš„å½±ç‰‡
**è¼¸å…¥ï¼š** æœå°‹é—œéµå­—ã€åœ°å€ã€æ™‚é–“ç¯„åœ
**è¼¸å‡ºï¼š** å½±ç‰‡ ID åˆ—è¡¨ + åŸºæœ¬è³‡è¨Š
**é…é¡æ¶ˆè€—ï¼š** 1 å–®ä½

```javascript
YouTube.Search.list('snippet', {
  q: query,
  maxResults: 50,
  order: 'viewCount',
  regionCode: regionCode,
  type: 'video'
})
```

### ç¬¬äºŒæ­¥ï¼šVideos.list (å–å¾—è©³ç´°è³‡æ–™)
**ç›®çš„ï¼š** æ‰¹é‡å–å¾—å½±ç‰‡çš„å®Œæ•´è©³ç´°è³‡è¨Š
**è¼¸å…¥ï¼š** å½±ç‰‡ ID åˆ—è¡¨ (æœ€å¤š 50 å€‹)
**è¼¸å‡ºï¼š** å®Œæ•´å½±ç‰‡è³‡æ–™ (è§€çœ‹æ•¸ã€æ¨™ç±¤ã€æè¿°ã€hashtags)
**é…é¡æ¶ˆè€—ï¼š** 1 å–®ä½

```javascript
YouTube.Videos.list('snippet,statistics', {
  id: 'videoId1,videoId2,videoId3,...'  // æ‰¹é‡æŸ¥è©¢
})
```

---

## âš¡ æ€§èƒ½åˆ†æ

### ç•¶å‰é…é¡ä½¿ç”¨é‡
- **æ¯æ—¥è¿½è¹¤æ¬¡æ•¸ï¼š** 6 æ¬¡ (3åœ°å€ Ã— 2é¡å‹)
- **æ¯æ¬¡ API èª¿ç”¨ï¼š** 2 æ¬¡ (Search + Videos)
- **æ¯æ—¥ç¸½é…é¡ï¼š** 12 å–®ä½
- **YouTube å…è²»é™é¡ï¼š** 10,000 å–®ä½/å¤©
- **ä½¿ç”¨ç‡ï¼š** 0.12%

### æ‰¹é‡è™•ç†æ•ˆç‡
- **å–®æ¬¡ Videos.listï¼š** æœ€å¤šæŸ¥è©¢ 50 å€‹å½±ç‰‡
- **é¿å…é€å€‹èª¿ç”¨ï¼š** å¾ 50 æ¬¡æ¸›å°‘åˆ° 1 æ¬¡
- **é…é¡ç¯€çœï¼š** 98% æ•ˆç‡æå‡

---

## ğŸ” è³‡æ–™çµæ§‹èªªæ˜

### Search.list å›å‚³è³‡æ–™
```javascript
{
  id: { videoId: "abc123" },
  snippet: {
    title: "åŸºæœ¬æ¨™é¡Œ",
    description: "å¯èƒ½è¢«æˆªæ–·çš„æè¿°...",
    channelTitle: "é »é“åç¨±",
    publishedAt: "2025-09-16T..."
    // ç¼ºå°‘ï¼štags, å®Œæ•´ description, statistics
  }
}
```

### Videos.list å›å‚³è³‡æ–™
```javascript
{
  id: "abc123",
  snippet: {
    title: "å®Œæ•´æ¨™é¡Œ",
    description: "å®Œæ•´æè¿°åŒ…å«æ‰€æœ‰ #hashtags...",
    tags: ["ai", "music", "generated"],  // âœ… å‰µä½œè€…æ¨™ç±¤
    channelTitle: "é »é“åç¨±"
  },
  statistics: {
    viewCount: "12345",     // âœ… è§€çœ‹æ•¸
    likeCount: "678",       // âœ… æŒ‰è®šæ•¸
    commentCount: "90"      // âœ… ç•™è¨€æ•¸
  }
}
```

---

## ğŸ› ï¸ å¯¦ç¾ç´°ç¯€

### getVideoDetails() å‡½æ•¸æµç¨‹
1. **æå– video IDï¼š** å¾ Search çµæœä¸­æå–æ‰€æœ‰ videoId
2. **éæ¿¾ç©ºå€¼ï¼š** ç§»é™¤ç„¡æ•ˆçš„ ID
3. **æ‰¹é‡æŸ¥è©¢ï¼š** å°‡ ID ç”¨é€—è™Ÿé€£æ¥ï¼Œä¸€æ¬¡æŸ¥è©¢æœ€å¤š 50 å€‹
4. **è³‡æ–™è™•ç†ï¼š** æå– hashtagsï¼Œæ•´ç†æˆæ¨™æº–æ ¼å¼
5. **æ’åºè¼¸å‡ºï¼š** æŒ‰è§€çœ‹æ•¸æ’åº

### hashtags è™•ç†æ©Ÿåˆ¶
- **ä¾†æºï¼š** snippet.description + snippet.title
- **æå–ï¼š** æ­£å‰‡è¡¨é”å¼ `/#[\w\u4e00-\u9fff]+/g`
- **æ ¼å¼ï¼š** é™£åˆ—å½¢å¼åœ¨ APIï¼Œé€—è™Ÿåˆ†éš”åœ¨ Google Sheet
- **æ”¯æ´ï¼š** ä¸­è‹±æ–‡ hashtag

---

## âš ï¸ æ³¨æ„äº‹é …

### API é™åˆ¶
- **Videos.list å¿…é ˆæä¾› video ID**ï¼Œç„¡æ³•ç”¨é—œéµå­—æœå°‹
- **æ‰¹é‡æŸ¥è©¢ä¸Šé™ï¼š** ä¸€æ¬¡æœ€å¤š 50 å€‹ ID
- **æœå°‹çµæœå¯èƒ½åŒ…å«ç„¡æ•ˆ ID**ï¼Œéœ€è¦éæ¿¾è™•ç†

### éŒ¯èª¤è™•ç†
- **ç©ºçµæœæª¢æŸ¥ï¼š** æœå°‹ç„¡çµæœæ™‚è·³é Videos.list èª¿ç”¨
- **ID é©—è­‰ï¼š** éæ¿¾æ‰ç©ºæˆ–ç„¡æ•ˆçš„ video ID
- **API éŒ¯èª¤ï¼š** çµ±ä¸€éŒ¯èª¤å›æ‡‰æ ¼å¼

### å‘å¾Œå…¼å®¹
- **ç¾æœ‰ API æ ¼å¼ä¿æŒä¸è®Š**
- **Google Sheet æ–°å¢ hashtags æ¬„ä½åœ¨æœ€å¾Œ**
- **ä¸å½±éŸ¿ç¾æœ‰ç´¢å¼•å’Œå‡½æ•¸**

---

## ğŸ“ˆ è¶¨å‹¢åˆ†æåƒæ•¸è¦åŠƒ

### ğŸ¯ ç›®æ¨™ï¼šå¢å¼·å½±ç‰‡æ•¸æ“šåˆ†æèƒ½åŠ›

#### ç•¶å‰å·²æœ‰çš„æ•¸æ“š
- `viewCount`: è§€çœ‹æ•¸ - æ ¸å¿ƒæµé‡æŒ‡æ¨™
- `tags`: å‰µä½œè€…æ¨™ç±¤ - å…§å®¹åˆ†é¡
- `hashtags`: æå–çš„ hashtag - è¶¨å‹¢æ¨™ç±¤
- `publishedAt`: ç™¼ä½ˆæ™‚é–“ - æ™‚é–“åºåˆ—åˆ†æ

#### ğŸ“Š è¨ˆåŠƒæ–°å¢çš„è¶¨å‹¢åˆ†æåƒæ•¸

**1. äº’å‹•æŒ‡æ¨™ (statistics éƒ¨åˆ†)**
```javascript
likeCount: parseInt(video.statistics.likeCount) || 0,        // æŒ‰è®šæ•¸
commentCount: parseInt(video.statistics.commentCount) || 0,  // ç•™è¨€æ•¸
```
- **ç”¨é€”**: è¨ˆç®—åƒèˆ‡ç‡ `(likes + comments) / views`
- **è¶¨å‹¢åˆ†æ**: AI å…§å®¹çš„äº’å‹•æ¨¡å¼
- **é…é¡æˆæœ¬**: ç„¡é¡å¤–æˆæœ¬ (å·²åœ¨ statistics ä¸­)

**2. å…§å®¹ç‰¹å¾µ (contentDetails éƒ¨åˆ†)**
```javascript
duration: video.contentDetails?.duration || '',             // å½±ç‰‡é•·åº¦ (PT4M13S æ ¼å¼)
definition: video.contentDetails?.definition || '',         // ç•«è³ª (sd/hd)
```
- **ç”¨é€”**: åˆ†æå…§å®¹é•·åº¦è¶¨å‹¢ï¼Œå“è³ª vs è¡¨ç¾é—œä¿‚
- **è¶¨å‹¢åˆ†æ**: çŸ­å½±ç‰‡ vs é•·å½±ç‰‡è¡¨ç¾
- **é…é¡æˆæœ¬**: ç„¡é¡å¤–æˆæœ¬ (contentDetails ç‚ºåŸºæœ¬è³‡æ–™)

**3. åˆ†é¡è³‡è¨Š (snippet éƒ¨åˆ†)**
```javascript
categoryId: video.snippet.categoryId || '',                 // YouTube åˆ†é¡ ID
defaultLanguage: video.snippet.defaultLanguage || ''        // ä¸»è¦èªè¨€
```
- **ç”¨é€”**: å…§å®¹åˆ†é¡åˆ†æï¼Œå¤šèªè¨€å¸‚å ´åˆ†æ
- **è¶¨å‹¢åˆ†æ**: å“ªäº›åˆ†é¡çš„ AI å…§å®¹æœ€å—æ­¡è¿
- **é…é¡æˆæœ¬**: ç„¡é¡å¤–æˆæœ¬ (å·²åœ¨ snippet ä¸­)

#### ğŸ”§ æŠ€è¡“å¯¦ç¾è¨ˆåŠƒ

**1. API èª¿ç”¨ä¿®æ”¹**
```javascript
// å¾é€™å€‹
YouTube.Videos.list('snippet,statistics', { id: videoIds.join(',') })

// æ”¹ç‚ºé€™å€‹
YouTube.Videos.list('snippet,statistics,contentDetails', { id: videoIds.join(',') })
```

**2. å›æ‡‰ç‰©ä»¶æ“´å±•**
```javascript
// ç¾æœ‰çš„å›æ‡‰ç‰©ä»¶æœƒå¢åŠ é€™äº›æ¬„ä½
{
  // ... ç¾æœ‰æ¬„ä½
  likeCount: 678,
  commentCount: 90,
  duration: "PT4M13S",
  definition: "hd",
  categoryId: "28",
  defaultLanguage: "zh-Hant"
}
```

**3. Google Sheet è€ƒé‡**
- **é¸é … A**: ä¿æŒç¾ç‹€ï¼Œæ–°åƒæ•¸åªåœ¨ API å›æ‡‰ä¸­
- **é¸é … B**: é¸æ“‡æ€§åŠ å…¥é‡è¦åƒæ•¸åˆ° Google Sheet (å¦‚ likeCount, duration)
- **å»ºè­°**: å…ˆå¯¦ç¾é¸é … Aï¼Œå¾ŒçºŒæ ¹æ“šéœ€æ±‚è€ƒæ…® Sheet æ“´å±•

#### ğŸ“‹ å¯¦æ–½æ­¥é©Ÿ
1. [ ] æ›´æ–° `getVideoDetails()` å‡½æ•¸çš„ API èª¿ç”¨
2. [ ] åŠ å…¥æ–°çš„è³‡æ–™æ¬„ä½åˆ°å›æ‡‰ç‰©ä»¶
3. [ ] æ¸¬è©¦ API èª¿ç”¨å’Œè³‡æ–™å®Œæ•´æ€§
4. [ ] æ›´æ–°æ–‡ä»¶è¨˜éŒ„æ–°çš„è³‡æ–™çµæ§‹
5. [ ] è€ƒæ…® Google Sheet æ¬„ä½æ“´å±• (å¯é¸)

#### âš ï¸ é¢¨éšªè©•ä¼°
- **é…é¡å½±éŸ¿**: ç„¡ (contentDetails ä¸å¢åŠ é…é¡æ¶ˆè€—)
- **å‘å¾Œå…¼å®¹**: âœ… åªå¢åŠ æ¬„ä½ï¼Œä¸å½±éŸ¿ç¾æœ‰åŠŸèƒ½
- **è³‡æ–™å¤§å°**: è¼•å¾®å¢åŠ ï¼Œä½†åœ¨å¯æ¥å—ç¯„åœå…§

---

## ğŸ“ˆ å„ªåŒ–å»ºè­°

### çŸ­æœŸå„ªåŒ–
- [ ] åŠ å…¥ API èª¿ç”¨é‡è©¦æ©Ÿåˆ¶
- [ ] å¯¦ç¾éŒ¯èª¤æ—¥èªŒè¨˜éŒ„
- [ ] ç›£æ§é…é¡ä½¿ç”¨è¶¨å‹¢

### é•·æœŸå„ªåŒ–
- [ ] è€ƒæ…®æœ¬åœ°å¿«å–æ¸›å°‘é‡è¤‡æŸ¥è©¢
- [ ] å¯¦ç¾å¢é‡æ›´æ–°æ©Ÿåˆ¶
- [ ] åˆ†æ hashtags è¶¨å‹¢æ•¸æ“š

---

## ğŸ”— ç›¸é—œæ–‡ä»¶
- [YouTube Data API v3 - Search](https://developers.google.com/youtube/v3/docs/search/list)
- [YouTube Data API v3 - Videos](https://developers.google.com/youtube/v3/docs/videos/list)
- [é…é¡è¨ˆç®—å’Œé™åˆ¶](https://developers.google.com/youtube/v3/getting-started#quota)

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025-09-16
**ç¶­è­·è€…ï¼š** AI Assistant (Claude)
**ç‰ˆæœ¬ï¼š** 1.1 - åŠ å…¥è¶¨å‹¢åˆ†æåƒæ•¸è¦åŠƒ